name: Simple CI

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ‰ å¼€å§‹
      run: echo "ğŸš€ CI/CD æµæ°´çº¿å¼€å§‹ï¼"
      
    - name: ğŸ“ æ˜¾ç¤ºæ–‡ä»¶
      run: |
        echo "é¡¹ç›®æ–‡ä»¶:"
        ls -la
        echo ""
        echo "å½“å‰æ—¶é—´: $(date)"
        
    - name: âœ… å®Œæˆ
      run: echo "ğŸ‰ CI/CD å®éªŒæˆåŠŸï¼"
    - name: ğŸ“¦ æ‰“åŒ…æ„å»º
      run: |
        echo "æ­£åœ¨æ‰“åŒ…..."
        mkdir -p dist
        cp index.html dist/
        cp style.css dist/ 2>/dev/null || true
        cp script.js dist/ 2>/dev/null || true
        echo "âœ… æ‰“åŒ…å®Œæˆï¼"
deploy:
  name: ğŸš€ éƒ¨ç½²åˆ°GitHub Pages
  needs: [quality-check]  # ä¾èµ–æµ‹è¯•ä»»åŠ¡
  if: success() && github.ref == 'refs/heads/main'
  runs-on: ubuntu-latest
  
  steps:
    - name: ğŸšš æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
      
    - name: ğŸ¯ éƒ¨ç½²
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist
        publish_branch: gh-pages
