name: Simple CI/CD

# è§¦å‘æ¡ä»¶ï¼šä»»ä½•æ¨é€éƒ½ä¼šè¿è¡Œ
on:
  push:  # æ‰€æœ‰åˆ†æ”¯çš„æ‰€æœ‰æ¨é€
  pull_request:  # æ‰€æœ‰PR
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è¿è¡Œ

jobs:
  # å·¥ä½œ1ï¼šæ„å»ºå’Œæµ‹è¯•
  build-and-test:
    name: ğŸ› ï¸ æ„å»ºå’Œæµ‹è¯•
    runs-on: ubuntu-latest  # ä½¿ç”¨æœ€æ–°Ubuntu
    
    steps:
    # æ­¥éª¤1ï¼šæ˜¾ç¤ºå¼€å§‹ä¿¡æ¯
    - name: ğŸš€ å¼€å§‹CI/CDæµæ°´çº¿
      run: |
        echo "=========================================="
        echo "ğŸš€ CI/CDæµæ°´çº¿å¼€å§‹æ‰§è¡Œ"
        echo "=========================================="
        echo "æ—¶é—´: $(date)"
        echo "ä»“åº“: ${{ github.repository }}"
        echo "äº‹ä»¶: ${{ github.event_name }}"
        echo "åˆ†æ”¯: ${{ github.ref }}"
        echo ""
    
    # æ­¥éª¤2ï¼šæ£€å‡ºä»£ç 
    - name: ğŸšš æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
    
    # æ­¥éª¤3ï¼šæ˜¾ç¤ºé¡¹ç›®ç»“æ„
    - name: ğŸ“ æ˜¾ç¤ºé¡¹ç›®ç»“æ„
      run: |
        echo "ğŸ” æ£€æŸ¥å¿…è¦æ–‡ä»¶ï¼š"
        if [ -f "README.md" ]; then echo "âœ… README.md å­˜åœ¨"; else echo "âŒ README.md ç¼ºå¤±"; fi
        if [ -f "index.html" ]; then echo "âœ… index.html å­˜åœ¨"; else echo "âŒ index.html ç¼ºå¤±"; fi
        if [ -f "package.json" ]; then echo "âœ… package.json å­˜åœ¨"; else echo "âŒ package.json ç¼ºå¤±"; fi
        if [ -f "test.sh" ]; then echo "âœ… test.sh å­˜åœ¨"; else echo "âŒ test.sh ç¼ºå¤±"; fi
        echo ""
    
    # æ­¥éª¤5ï¼šè¿è¡Œæµ‹è¯•
    - name: ğŸ§ª è¿è¡Œæµ‹è¯•
      run: |
        echo "ğŸ§ª å¼€å§‹è¿è¡Œæµ‹è¯•..."
        ./test.sh
    
    # æ­¥éª¤6ï¼šæµ‹è¯•æˆåŠŸå¤„ç†
    - name: ğŸ‰ æµ‹è¯•æˆåŠŸ
      if: success()
      run: |
        echo ""
        echo "=========================================="
        echo "ğŸ‰ ğŸ‰ ğŸ‰ æ­å–œï¼ ğŸ‰ ğŸ‰ ğŸ‰"
        echo "âœ… CI/CDæµæ°´çº¿æ‰§è¡ŒæˆåŠŸï¼"
        echo "âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡"
        echo "âœ… ä»£ç è´¨é‡è‰¯å¥½"
        echo "=========================================="
    
    # æ­¥éª¤7ï¼šæµ‹è¯•å¤±è´¥å¤„ç†
    - name: ğŸš¨ æµ‹è¯•å¤±è´¥
      if: failure()
      run: |
        echo ""
        echo "=========================================="
        echo "âŒ âŒ âŒ æ³¨æ„ï¼ âŒ âŒ âŒ"
        echo "âŒ CI/CDæµæ°´çº¿æ‰§è¡Œå¤±è´¥"
        echo "âŒ è¯·æ£€æŸ¥æµ‹è¯•é”™è¯¯"
        echo "=========================================="
EOF
